"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4605],{9941:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"getting-started/advanced-deployment-options/protect","title":"Ensuring Gaia Node Reliability","description":"Protect the server process","source":"@site/docs/getting-started/advanced-deployment-options/protect.md","sourceDirName":"getting-started/advanced-deployment-options","slug":"/getting-started/advanced-deployment-options/protect","permalink":"/getting-started/advanced-deployment-options/protect","draft":false,"unlisted":false,"editUrl":"https://github.com/GaiaNet-AI/docs/edit/main/docs/getting-started/advanced-deployment-options/protect.md","tags":[],"version":"current","sidebarPosition":105,"frontMatter":{"sidebar_position":105},"sidebar":"tutorialSidebar","previous":{"title":"Run a local-only node","permalink":"/getting-started/advanced-deployment-options/local"},"next":{"title":"\ud83d\udee0\ufe0f For Node Operators","permalink":"/node-operators"}}');var n=s(4848),r=s(8453);const i={sidebar_position:105},d="Ensuring Gaia Node Reliability",c={},a=[{value:"Protect the server process",id:"protect-the-server-process",level:2},{value:"Use Supervise",id:"use-supervise",level:2},{value:"Reduce the nice value",id:"reduce-the-nice-value",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"ensuring-gaia-node-reliability",children:"Ensuring Gaia Node Reliability"})}),"\n",(0,n.jsx)(t.h2,{id:"protect-the-server-process",children:"Protect the server process"}),"\n",(0,n.jsxs)(t.p,{children:["Sometimes, the OS could kill the ",(0,n.jsx)(t.code,{children:"wasmedge"})," process on the Gaia node if it consumes too much resources. For production\nservers, you should protect the server process."]}),"\n",(0,n.jsx)(t.h2,{id:"use-supervise",children:"Use Supervise"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"supervise"})," tool can help us monitor the ",(0,n.jsx)(t.code,{children:"wasmedge"})," process, and automatically restart the process\nin case the process dies or is killed.\nThe ",(0,n.jsx)(t.code,{children:"gaianet"})," CLI will make use of ",(0,n.jsx)(t.code,{children:"supervise"})," automatically if it is installed on the system."]}),"\n",(0,n.jsxs)(t.p,{children:["For macOS users, you can install ",(0,n.jsx)(t.code,{children:"supervise"})," via the daemontools tool by running the following command."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"brew install daemontools\n"})}),"\n",(0,n.jsxs)(t.p,{children:["For Linux users, please refer to ",(0,n.jsx)(t.a,{href:"https://cr.yp.to/daemontools/install.html",children:"the installation guide"})," to install the ",(0,n.jsx)(t.code,{children:"daemontools"})," tool."]}),"\n",(0,n.jsx)(t.h2,{id:"reduce-the-nice-value",children:"Reduce the nice value"}),"\n",(0,n.jsxs)(t.p,{children:["If the ",(0,n.jsx)(t.code,{children:"supervise"})," tool is too heavy handed, we could also increase the priority of the ",(0,n.jsx)(t.code,{children:"wasmedge"})," process. The OS\nwill try NOT to kill high priority processes until it absolutely has to. We do that by reducing the ",(0,n.jsx)(t.code,{children:"nice"})," value\nof the ",(0,n.jsx)(t.code,{children:"wasmedge"})," process."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"sudo renice -n -19 $(cat $HOME/gaianet/llamaedge.pid)\n"})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>d});var o=s(6540);const n={},r=o.createContext(n);function i(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);